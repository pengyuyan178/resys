### 实验log

## 七月

# 07-09下午

- 先把上午写的一个例子做数据，用了一个笨拙的O (n^2)的复杂度计算一个相似度矩阵，得出的结果和自己手算的结果一致，就开始在MovieLens上开始测试。
- 直接使用folder里的data，先只测试20train，80test，在实验复现的时候，发现自己的O (n^2)的复杂度方式计算起来太慢，就开始查找资料，看代码，最后直接通过item度和u-i来得出相似度矩阵，即item_similarity_matrix = (train_data.T * train_data).multiply(np.reciprocal(np.sqrt(train_col_du.T * train_col_du)))
- 后面就在想推荐列表应该怎么来求？item_similarity_matrix直接乘以u-i按位取反

# 07-09晚上

- 根据下午的思想，开始用小数据集验证正确性，可行。就转成稀疏并取反与item_similarity_matrix相乘。
- 觉得都差不多了，就开始找评价指标的怎么求？找了很多，也没找到RS，NV是什么，就看看folder里的评价指标，只有recall，precision，md，f-score，Divsity这些，就先把RS，NV放了。
- 找完就太晚了，就把cnFun求评价指标的函数机翻了一下，果不其然会报错，然后我就大致对比了一些，按照自己的初步理解改了改代码，能跑通，就挂上Netflix，RYM数据集，20、80也一并加上，就开跑，明早看结果

# 07-10早上

- 和想的一样，结果全是错的，就开始分析matlab那cnfun代码里的意思，发现是一些矩阵没有转置，逐个相除变成了矩阵除（不知道是不是这样的意思，反正机翻太垃圾了），改好后就挂起代码吃饭去了
- 回来后对比结果，方向hc和md的结果不对，其他都对了，我就直接定位到了diffuseRec函数，再看看文档里写的公式，找到错误：hc和md的求解w矩阵反了
- 小问题修改和对照结果数据

# 07-10下午

- 午睡起来后看到运行时间15分钟，就开始寻找时间花在哪？
- 用print观察，发现时间都花在了cnfun函数里，求解I指标用了双重循环，就开始优化
- 最后优化成向量求解方式，但测试时小数据集更慢了，然后就大数据集采用新方法，小数据采用原来的方法

# 07-10晚上

- 开始尝试HHP，BD，BHC的计算，对着论文和matlab代码，总结一下方法
- 后面腰疼就出去走走

# 07-11 早上

- -开始在movielens上跑hhp，挂上代码后，吃饭
- 回来对比结果，结果全反（就是Lambda对应的值顺序反了，后面修改成1-Lambda的求值结果就对应上了）
- 重新开始跑

# 07-11中午

- 结果对了，就开始BD的修改
- 求BD的时候将Lambda修改了回去，然后开始跑起来了
- 看到第一个速度有点慢，就开始采用了之前的优化，速度从5分钟到了33秒

# 07-11晚上

最后进行修改，开始着手BHC做最后的冲刺。BHC采用最早的line = Lambda就行，对比结果，差距不大

# 07-12早上

代码写的太累，早上没干活，睡到11点

# 07-12下午

MoviesLens的结果都对上了，就挂起代码把Netflix的相关全部跑完

# 07-12晚上

结果跑出来，有些数据对不上，就开始一步一步print找问题，最后瞎猫摸到死耗子，把w转置一下，结果就对了（搞不清楚什么原因）

然后就挂上代码全部跑完

# 07-13早上

一起来头晕身体重，干不动，就一直躺在床上

# 07-13晚上

- 身体好多了
- 迷迷糊糊的对着BD，MD，BHC，HHP与itemcf混合看不出什么所以然，就对着itemcf和usercf的求解步骤复现了一下，得出结果差距不大
- 后面就对的itemcf混合，随便写了写，把读入数据，评价指标的计算，相似度矩阵等一些基础的计算写好，保存好睡了

# 07-14中午

开始着手写itemcf混合的diffuseRec的函数，对照论文里的混合方式，把w求解写好，在movieLens上测试20，结果都对，就全部挂上，开始全部跑完混合的模型

# 07-14晚上

晚上9点左右，代码全部跑完，检测一部分的值，发现BHC部分结果错了，将W再转置回去，结果又对上了（就很奇怪）

# 07-14早上

把结果汇总一下，对比folder里的，基本一致，没什么太大的区别

# 07-19下午

研究了评价指标，并把RS补上
